<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Online Teacher Booking</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  /* Fun, colorful background for kids */
  body {
    background: linear-gradient(to right, #ffecd2, #fcb69f);
    font-family: 'Comic Sans MS', cursive, sans-serif;
  }

  .card {
    background: #fff0f5; /* light pink card */
    border-radius: 20px;
    border: 3px solid #ff69b4; /* hot pink border */
    box-shadow: 0 10px 25px rgba(255,105,180,0.3);
  }

  h3 {
    color: #ff1493; /* bright pink heading */
    text-align: center;
  }

  input, select {
    border-radius: 15px;
    border: 2px solid #ff69b4;
    padding: 10px;
    font-size: 16px;
  }

  input:focus, select:focus {
    border-color: #ff4500; /* orange on focus */
    box-shadow: 0 0 10px #ff69b4;
    outline: none;
  }

  .btn-primary {
    background-color: #ff69b4;
    border-color: #ff1493;
    font-weight: bold;
    font-size: 18px;
    transition: transform 0.2s;
  }

  .btn-primary:hover {
    background-color: #ff1493;
    transform: scale(1.05);
  }

  /* Add playful spacing */
  .mb-3 {
    margin-bottom: 20px !important;
  }
</style>
</head>

<body>

<div class="container py-5">
  <div class="card p-4 shadow">

    <h3>ðŸ“… Book a Fun Class!</h3>

    <form id="bookingForm">

      <input name="name" class="form-control mb-3" placeholder="Name" required>
      <input name="email" type="email" class="form-control mb-3" placeholder="Email" required>
      <input name="phone" class="form-control mb-3" placeholder="WhatsApp Number (974xxxxxxx)" required>

      <input name="date" id="dateField" type="date" class="form-control mb-3" required>

      <select id="teacher" name="teacher" class="form-select mb-3" required>
        <option value="">Select Teacher</option>
        <option>Teacher Anna</option>
        <option>Teacher John</option>
      </select>

      <select id="timeSelect" name="time" class="form-select mb-3" required>
        <option value="">Select Time</option>
        <option>16:00</option>
        <option>17:00</option>
      </select>

      <button class="btn btn-primary w-100">Book Now</button>

    </form>
  </div>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzbxhf1RoEdeimXyZ4HmfP_wPhjTQyJ3_cBR1Xs3sq2G6y0BC09CZqtdl8O6uybMAIS2g/exec";

const form = document.getElementById("bookingForm");
const dateField = document.getElementById("dateField");
const teacher = document.getElementById("teacher");
const timeSelect = document.getElementById("timeSelect");

dateField.min = new Date().toISOString().split("T")[0];

function loadSlots() {
  if (!dateField.value || !teacher.value) return;

  fetch(
    WEB_APP_URL +
    "?action=slots&date=" + dateField.value +
    "&teacher=" + teacher.value
  )
  .then(r => r.json())
  .then(slots => {
    timeSelect.innerHTML = '<option value="">Select Time</option>';
    slots.forEach(t => {
      let o = document.createElement("option");
      o.value = t;
      o.textContent = t;
      timeSelect.appendChild(o);
    });
  });
}

dateField.addEventListener("change", loadSlots);
teacher.addEventListener("change", loadSlots);

form.addEventListener("submit", function(e){
  e.preventDefault();

  fetch(WEB_APP_URL, {
    method: "POST",
    body: new FormData(form)
  })
  .then(r => r.text())
  .then(msg => {
    alert(msg);
    form.reset();
    timeSelect.innerHTML = '<option value="">Select Time</option>';
  })
  .catch(() => alert("Booking failed"));
});
</script>

</body>
</html>
